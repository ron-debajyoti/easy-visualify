(this.webpackJsonpvisualify=this.webpackJsonpvisualify||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(25),c=n(41),i=n.n(c),l=n(8),u=n(9),s=n(11),d=n(10),p=n(1),m=n(2),h=n(26),y=n.n(h),f=n(35),g=n(18),_=n.n(g),b=n(42),E=n.n(b),v=n(4),w=n(30);n(50);n(51).config();var k=n(85),O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).BACKEND_URL||"https://easy-visualify-backend.herokuapp.com/request/",C=[{country_code:"AR",country:"Argentina"},{country_code:"AU",country:"Australia"},{country_code:"AT",country:"Austria"},{country_code:"BE",country:"Belgium"},{country_code:"BO",country:"Bolivia"},{country_code:"BR",country:"Brazil"},{country_code:"BG",country:"Bulgaria"},{country_code:"CA",country:"Canada"},{country_code:"CL",country:"Chile"},{country_code:"CO",country:"Columbia"},{country_code:"CR",country:"Costa Rica"},{country_code:"CZ",country:"Czechia"},{country_code:"DK",country:"Denmark"},{country_code:"DO",country:"Dominican Rep."},{country_code:"EC",country:"Ecuador"},{country_code:"SV",country:"El Salvador"},{country_code:"EE",country:"Estonia"},{country_code:"FI",country:"Finland"},{country_code:"FR",country:"France"},{country_code:"DE",country:"Germany"},{country_code:"GR",country:"Greece"},{country_code:"GT",country:"Guatemala"},{country_code:"HN",country:"Honduras"},{country_code:"HK",country:"Hong Kong"},{country_code:"HU",country:"Hungary"},{country_code:"IS",country:"Iceland"},{country_code:"IN",country:"India"},{country_code:"ID",country:"Indonesia"},{country_code:"IE",country:"Ireland"},{country_code:"IS",uri:"spotify:user:spotifycharts:playlist:37i9dQZEVXbJ6IpvItkve3"},{country_code:"IT",country:"Italy"},{country_code:"JP",country:"Japan"},{country_code:"LV",country:"Latvia"},{country_code:"LT",country:"Lithuania"},{country_code:"LI",country:"Liechtenstein"},{country_code:"MY",country:"Malaysia"},{country_code:"MX",country:"Mexico"},{country_code:"NL",country:"Netherlands"},{country_code:"NZ",country:"New Zealand"},{country_code:"NI",country:"Nicaragua"},{country_code:"NO",country:"Norway"},{country_code:"PA",country:"Panama"},{country_code:"PY",country:"Paraguay"},{country_code:"PE",country:"Peru"},{country_code:"PH",country:"Philipines"},{country_code:"PL",country:"Poland"},{country_code:"PT",country:"Portugal"},{country_code:"RO",country:"Romania"},{country_code:"RU",country:"Russia"},{country_code:"SG",country:"Singapore"},{country_code:"SK",country:"Slovakia"},{country_code:"ZA",country:"South Africa"},{country_code:"ES",country:"Spain"},{country_code:"SE",country:"Sweden"},{country_code:"CH",country:"Switzerland"},{country_code:"TW",country:"Taiwan"},{country_code:"TH",country:"Thailand"},{country_code:"TR",country:"Turkey"},{country_code:"GB",country:"United Kingdom"},{country_code:"US",country:"United States of America"},{country_code:"UA",country:"Ukraine"},{country_code:"UY",country:"Uruguay"},{country_code:"VN",country:"Vietnam"}],x=(n(86),n(87),function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={playlists:null},e.renderDataOnClick=function(t,n){var o=t.properties.NAME,a=C.filter((function(e){return e.country===o}))[0];if(void 0===a)n([o]);else{var r=e.state.playlists[0].topPlaylists.filter((function(e){return e.country_code===a.country_code}))[0].data,c=e.state.playlists[1].viralPlaylists.filter((function(e){return e.country_code===a.country_code}))[0].data,i=[],l=[];r.forEach((function(e){var t={};t.uri=e.track.uri,t.popularity=e.track.popularity,t.viewCoverArt=!0,i.push(t)})),c.forEach((function(e){var t={};t.uri=e.track.uri,t.popularity=e.track.popularity,t.viewCoverArt=!0,l.push(t)}));var u=[];u.push(i),u.push(l),u.push([o]),n(u)}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;k(O,{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(t){e.setState((function(){return{playlists:t}})),console.log("fetched data!")}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.setTooltipContent,o=t.setTooltip;return a.a.createElement("div",null,a.a.createElement(w.ComposableMap,{"data-tip":"",projectionConfig:{scale:175}},a.a.createElement(w.ZoomableGroup,{zoom:1},a.a.createElement(w.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"},(function(t){return t.geographies.map((function(t){return a.a.createElement(w.Geography,{key:t.rsmKey,geography:t,onClick:function(){return e.renderDataOnClick(t,n)},onMouseEnter:function(){var e=t.properties.NAME;o(e)},onMouseLeave:function(){o("")},style:{default:{fill:"#CFD8DC"},hover:{fill:"#F53",outline:"none"},pressed:{fill:"#E42",outline:"none"}}})}))})))))}}]),n}(o.Component)),j=Object(o.memo)(x),N=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e="https://open.spotify.com/embed?uri="+"".concat(this.props.uri).concat(this.props.lightTheme?"&theme=white":"")+"".concat(this.props.viewCoverArt?"&view=coverart":"");return a.a.createElement("embed",{title:this.props.title,src:e,width:this.props.width,height:this.props.height})}}]),n}(o.Component),I=n(56),M=n(28),T=n(57),S=n.n(T),A=p.a.button.withConfig({displayName:"UserModal__Button",componentId:"sc-190ybzx-0"})(["font-size:1em;margin:1em;padding:0.5em 1em;border:2px solid black;border-radius:3px;float:right;bottom:0;"]),U=p.a.img.withConfig({displayName:"UserModal__Img",componentId:"sc-190ybzx-1"})(["float:left;border-radius:100%;width:400%;height:auto;"]),z=p.a.div.withConfig({displayName:"UserModal__Wrapper",componentId:"sc-190ybzx-2"})(["display:inline-block;"]),P=p.a.div.withConfig({displayName:"UserModal__UserTemplate",componentId:"sc-190ybzx-3"})(["width:20px;height:5px;"]),D=p.a.div.withConfig({displayName:"UserModal__NoUserTemplate",componentId:"sc-190ybzx-4"})(["border:2px solid currentColor;border-radius:100%;padding:20px;"]),B=p.a.a.withConfig({displayName:"UserModal__UserName",componentId:"sc-190ybzx-5"})(["&:hover;&:focus{color:red;}"]),G=p.a.h1.withConfig({displayName:"UserModal__Name",componentId:"sc-190ybzx-6"})(["font-size:1.5em;font-weight:50;float:left;margin:20px 0 0;"]),R=p.a.div.withConfig({displayName:"UserModal__Number",componentId:"sc-190ybzx-7"})(["color:black;font-weight:500;font-size:15px;"]),L=p.a.div.withConfig({displayName:"UserModal__NumberLabel",componentId:"sc-190ybzx-8"})(["color:black;font-size:15px;text-transform:uppercase;letter-spacing:1px;margin-top:15px"]),W=p.a.div.withConfig({displayName:"UserModal__Stat",componentId:"sc-190ybzx-9"})(["text-align:center;display:inline-block;"]),V=p.a.div.withConfig({displayName:"UserModal__Stats",componentId:"sc-190ybzx-10"})(["display:flex;margin-top:20px;"]),H=p.a.li.withConfig({displayName:"UserModal__Artist",componentId:"sc-190ybzx-11"})(["display:flex;align-items:center;margin-bottom:15px;&:hover;"]),K=p.a.div.withConfig({displayName:"UserModal__ArtistArtwork",componentId:"sc-190ybzx-12"})(["display:inline-block;position:relative;width:30px;min-width:30px;margin-right:15px;img{width:30px;min-width:30px;height:30px;margin-right:15px;border-radius:100%;}"]),F=p.a.div.withConfig({displayName:"UserModal__ArtistName",componentId:"sc-190ybzx-13"})(["flex-grow:1;a{color:black;text-decoration:none;}span{border-bottom:1px solid transparent;&:hover,&:focus{color:black;border-bottom:1px solid white;}}"]),Z=p.a.div.withConfig({displayName:"UserModal__Heading",componentId:"sc-190ybzx-14"})(["display:inline-block;float:left;justify-content:space-between;margin:20px 20px h3{display:inline-block;margin:0;}"]),J=p.a.section.withConfig({displayName:"UserModal__MinorWrapper",componentId:"sc-190ybzx-15"})(["display:flex;width:70%;margin-top:100px;overflow:auto;"]),Y=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).checkPropIsNull=function(){return e.props.userObject.display_name.length>0?a.a.createElement("div",null,a.a.createElement(P,null,e.props.userObject.images.length>0?a.a.createElement(U,{src:e.props.userObject.images[0].url,alt:"avatar"}):a.a.createElement(D,null)),a.a.createElement(B,{href:e.props.userObject.external_urls.spotify,target:"_blank",rel:"noopener noreferrer"},a.a.createElement(G,null,e.props.userObject.display_name)),a.a.createElement(V,null,a.a.createElement(W,null,a.a.createElement(R,null,e.props.userObject.followers),a.a.createElement(L,null,"Followers"))),a.a.createElement(J,null,a.a.createElement(Z,null,a.a.createElement("h3",null,"Top Listened Artists "),a.a.createElement("div",null,e.props.userObject.topArtists?a.a.createElement("ul",null,e.props.userObject.topArtists.items.slice(0,10).map((function(e,t){return a.a.createElement(H,{key:t},a.a.createElement(K,null,e.images.length&&a.a.createElement(U,{src:e.images[2].url,alt:"Artist"})),a.a.createElement(F,null,a.a.createElement("a",{href:e.external_urls.spotify},a.a.createElement("span",null,e.name))))}))):a.a.createElement("div",null))),a.a.createElement(Z,null,a.a.createElement("h3",null,"Top Music Genre"),a.a.createElement("div",null,e.props.userObject.recommendedGenre?a.a.createElement("ul",null,e.props.userObject.recommendedGenre.slice(0,10).map((function(e,t){return a.a.createElement(H,null,a.a.createElement(F,{key:t},a.a.createElement("span",null,e)))}))):a.a.createElement("div",null)))),a.a.createElement(J,null),a.a.createElement(A,{onClick:e.handleCloseModal},"Close")):a.a.createElement("div",null,a.a.createElement(A,{onClick:e.handleCloseModal},"Close"))},e.state={showModal:!1},e.handleOpenModal=e.handleOpenModal.bind(Object(M.a)(e)),e.handleCloseModal=e.handleCloseModal.bind(Object(M.a)(e)),e}return Object(u.a)(n,[{key:"handleOpenModal",value:function(){this.setState({showModal:!0})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){return a.a.createElement(z,null,a.a.createElement(A,{onClick:this.handleOpenModal},"View Your Stats! "),a.a.createElement(S.a,{isOpen:this.state.showModal,contentLabel:"Modal"},a.a.createElement(this.checkPropIsNull,null)))}}]),n}(o.Component),q=n(98),X=p.a.button.withConfig({displayName:"Main__Button",componentId:"dkkfvr-0"})(["background:palevioletred;color:white;font-size:0.75em;margin:1em;padding:0.5em 1em;border:2px solid black;border-radius:3px;"]),Q=Object(p.a)(X).withConfig({displayName:"Main__TriggerButton",componentId:"dkkfvr-1"})(["float:right;"]),$=p.a.div.withConfig({displayName:"Main__ButtonWrapper",componentId:"dkkfvr-2"})(["display:inline-block;background:white;"]),ee=p.a.div.withConfig({displayName:"Main__Wrapper",componentId:"dkkfvr-3"})(["background-color:white;"]),te=p.a.div.withConfig({displayName:"Main__WidgetTitle",componentId:"dkkfvr-4"})(["font-size:1.5em;float:center;text-align:left;color:palevioletred;background-color:white;"]),ne=p.a.div.withConfig({displayName:"Main__WidgetWrapper",componentId:"dkkfvr-5"})(["padding:1em;background:aquamarine float:right;"]),oe=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={content:"s",country:"None",contentType:"top",user:{display_name:null,country:null,followers:null,images:null,external_urls:null,product:null,topTracks:null,topArtists:null,recommendedGenre:null}},e.updateGenre=Object(f.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.state.user.topArtists.items.slice(0,10).map((function(e){var t=e.genres;n=n.concat(t),n=q.uniq(n)})),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)}))),e.onUpdate=function(t){e.setState((function(){return{content:t}})),console.log("updated state !"),console.log(e.state.contentType),console.log(e.state.content)},e.onButtonClick=function(t){e.setState((function(){return{contentType:t}}))},e.tooltipRender=function(t){e.setState((function(){return{country:t}}))},e.IsValidData=function(){return e.state.content.length>=2?"top"===e.state.contentType?a.a.createElement(ne,null,a.a.createElement(te,null," Top 10 Playlists of ",e.state.content[2]," "),a.a.createElement("ol",null,a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][0].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][1].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][2].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][3].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][4].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][5].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][6].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][7].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[0][8].uri}))):a.a.createElement(ne,null,a.a.createElement(te,null," Viral 10 Playlists of ",e.state.content[2]," "),a.a.createElement("ol",null,a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][0].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][1].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][2].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][3].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][4].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][5].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][6].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][7].uri}),a.a.createElement(N,{width:300,height:100,uri:e.state.content[1][8].uri}))):a.a.createElement(te,null," Spotify is not supported in ",e.state.content[0]," !")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=_.a.get("access_token");console.log(t),function(e){return k("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:" Bearer "+e}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t).then((function(t){e.setState((function(){return Object(v.a)(Object(v.a)({},e.state),{},{user:Object(v.a)(Object(v.a)({},e.state.user),{},{display_name:t.display_name,country:t.country,followers:t.followers.total,external_urls:t.external_urls,images:t.images,product:t.product})})}))})),function(e){return k("https://api.spotify.com/v1/me/top/tracks?limit=15",{headers:{Authorization:" Bearer "+e}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t).then((function(t){e.setState((function(){return Object(v.a)(Object(v.a)({},e.state),{},{user:Object(v.a)(Object(v.a)({},e.state.user),{},{topTracks:t})})}))})),function(e){return k("https://api.spotify.com/v1/me/top/artists?limit=15",{headers:{Authorization:" Bearer "+e}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t).then((function(t){e.setState((function(){return Object(v.a)(Object(v.a)({},e.state),{},{user:Object(v.a)(Object(v.a)({},e.state.user),{},{topArtists:t})})}))})).then((function(){return e.updateGenre()})).then((function(t){console.log(t),e.setState((function(){return Object(v.a)(Object(v.a)({},e.state),{},{user:Object(v.a)(Object(v.a)({},e.state.user),{},{recommendedGenre:t})})}))})).then((function(){return console.log(e.state.user)}))}},{key:"render",value:function(){var e=this;return a.a.createElement(ee,null,a.a.createElement("h3",{style:{textAlign:"center"}},"Welcome"),a.a.createElement(Y,{userObject:this.state.user}),a.a.createElement(r.b,{to:"/main"},a.a.createElement(j,{setTooltipContent:function(t){return e.onUpdate(t)},setTooltip:this.tooltipRender})),a.a.createElement($,null,a.a.createElement(Q,{className:"Top10",onClick:function(){return e.onButtonClick("top")}}," View Top 10 "),a.a.createElement(Q,{className:"Viral10",onClick:function(){return e.onButtonClick("viral")}}," View Viral 10 ")),a.a.createElement(this.IsValidData,null),a.a.createElement(I.a,null,this.state.country))}}]),n}(o.Component),ae=void 0,re=p.a.div.withConfig({displayName:"Authenticate__WrongPage",componentId:"sc-1n7m4ec-0"})(["font-size:1.5em;text-align:center"]),ce=function(){return _.a.get("access_token")},ie=function(){var e=E.a.parse(window.location.search);if(console.log(e),t=e,0===Object.keys(t).length)return!1;var t,n=1e3*(e.expires_in||3600),o=new Date((new Date).getTime()+n);return _.a.set("access_token",e.access_token,{expires:o}),_.a.set("refresh_token",e.refresh_token),!0},le=function(){var e=Object(f.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.a.get("refresh_token")||!ce()){e.next=2;break}return e.abrupt("return",!0);case 2:return console.log("this is called"),ae.history.push("/login"),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).state={isAuthenticated:!1},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;le().then((function(t){e.setState((function(){return{isAuthenticated:t}}))}))}},{key:"render",value:function(){return console.log(this.state.isAuthenticated),this.state.isAuthenticated?this.props.render():null}}]),n}(o.Component),se=function(){var e=function(){var e=ce();return console.log(e),void 0!==e}(),t=ie();return e||t?a.a.createElement(ue,{render:function(){return a.a.createElement(oe,null)}}):(console.log("else block here called"),a.a.createElement(re,null,"You are not authenticated to access this page "))};n(51).config();var de=p.a.h1.withConfig({displayName:"IndexPage__Title",componentId:"sc-136vf5r-0"})(["font-size:1.5em;text-align:center;"]),pe=p.a.div.withConfig({displayName:"IndexPage__Wrapper",componentId:"sc-136vf5r-1"})(["padding:4em;"]),me=p.a.button.withConfig({displayName:"IndexPage__Button",componentId:"sc-136vf5r-2"})(["font-size:1em;margin:1em;padding:0.25em 1em;text-align = center;border:2px solid palevioletred;border-radius:3px;"]),he=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).mainPage=function(){return a.a.createElement(pe,null,a.a.createElement(de,null,"Easy Visualify"),a.a.createElement(r.b,{to:"/login"},a.a.createElement(me,{onClick:function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).AUTH_URL||"http://localhost:3001/login";window.location.href=e}}," Click to Enter ")))},e}return Object(u.a)(n,[{key:"render",value:function(){return a.a.createElement(m.a,null,a.a.createElement(m.c,null,a.a.createElement(m.a,{exact:!0,path:"/",component:this.mainPage}),a.a.createElement(m.a,{path:"/main",render:function(){return se()}})))}}]),n}(o.Component);i.a.render(a.a.createElement(r.a,null,a.a.createElement(he,null)),document.getElementById("root"))},64:function(e,t,n){e.exports=n(104)},86:function(e,t,n){},87:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.41815640.chunk.js.map